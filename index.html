<!DOCTYPE html> 
    <html> 
    <head>
        <Title>Node Express</Title>
        <meta charset="utf-8">
        <link rel="stylesheet" href="css/style.css">
        <link rel="stylesheet" href="css/lib/bootstrap.min.css">
    </head>
    <!-- <ul class="menu">
        <li><a href="#home">Home</a></li>
        <li><a href="#services">AS</a>
            <ul class="submenu">
                <li><a href="#web-development">방문</a></li>
                <li><a href="#app-development">택배</a></li>
                <li><a href="#seo-development">용달</a></li>
            </ul>
        </li>
        <li><a href="#services">Parts</a>
            <ul class="submenu">
                <li><a href="#web-development">선발송</a></li>
                <li><a href="#app-development">증가</a></li>
                <li><a href="#seo-development">감소</a></li>
            </ul>
        </li>
        </ul>
    </ul> -->
    <nav class="side-nav">
        <!-- 좌측 네비게이션 내용 -->
        <ul>
            <li><a href="#">메뉴 1</a></li>
            <li><a href="#">메뉴 2</a></li>
            <li><a href="#">메뉴 3</a></li>
        </ul>
    </nav>
    <div class="content">
        <div class="top-nav-1">
            <!-- 상단 네비게이션 내용 -->
            <form onsubmit="showSubmitMessage(); return false;">
                <label for="name">이름:</label>
                <input type="text" id="name" name="name" placeholder="검색" style="opacity: 0.7;">
                <input type="submit" value="제출">
              </form>
        </div>
    <div class="content">
        <div class="top-nav-1">
            <!-- 상단 네비게이션 내용 -->
            <ul>
                <li><a href="#">번호</a></li>
                <li><a href="#">날짜</a></li>
                <input type="checkbox">
                <label>예약</label>
                <input type="checkbox">
                <label>노예약</label>
                <input type="checkbox">
                <label>택배</label>
                <input type="checkbox">
                <label>용달</label>
                <li><a href="#">구입날짜</a></li>
                
                <li><a href="#">결제</a></li>
                <input type="checkbox">
                <label>무상</label>
                <input type="checkbox">
                <label>유상</label>
            </ul>
        </div>
    <div class="content">
        <div class="top-nav-3">
            <!-- 상단 네비게이션 내용 -->
            <ul class="ul-1">
                <label for="name">이름:</label>
                <input type="text" id="name" name="name" placeholder="검색" style="opacity: 0.7;">
                <label for="name">연락처:</label>
                <input type="number" id="name" name="name" placeholder="검색" style="opacity: 0.7;">
                <label for="name">주소:</label>
                <input type="text" id="name" name="name" placeholder="검색" style="opacity: 0.7;">
                <label for="name">주행거리:</label>
                <input type="text" id="name" name="name" placeholder="검색" style="opacity: 0.7;">
                <label for="name">모델:</label>
                <input type="text" id="name" name="name" placeholder="검색" style="opacity: 0.7;">
                <label for="number">연락처2:</label>
                <input type="text" id="name" name="name" placeholder="검색" style="opacity: 0.7;">
            </ul>
        </div>
    <div class="content">
        <div class="top-nav-2">
            <!-- 상단 네비게이션 내용 -->
            <ul>
                <label for="number">고장증상</label>
                <input type="text" id="name" name="name" placeholder="고객이 주장하는 고장 증상을 상세히 적으시오." style="opacity: 0.7;">
            </ul>
        </div>
    <div class="content">
        <div class="top-nav-2">
            <!-- 상단 네비게이션 내용 -->
            <ul>
                <label for="number">고장증상</label>
                
                <div class="vertical-buttons">
                    <button onclick="selectButton('No. 1', this, 0)">No. 1</button>
                    <button onclick="selectButton('No. 2', this, 1)">No. 2</button>
                    <button onclick="selectButton('No. 3', this, 2)">No. 3</button>
                </div>
                <input type="text" id="inputField" placeholder="내용을 입력하세요" onkeypress="handleKeyPress(event)">
                <button onclick="addContent()">입력</button>
                
                <div id="displayArea"></div>
            </ul>
        </div>
    <div class="content">
        <div class="top-nav-2">
            <!-- 상단 네비게이션 내용 -->
            <ul>
                <li><a href="#">부품사용</a></li>
            </ul>
        </div>    
        <main>
            <!-- 메인 콘텐츠 -->
            <h1>환영합니다!</h1>
            <p>여기는 메인 콘텐츠 영역입니다.</p>
            
    <body>
        
    <table>
        <div class="form-container">
            <h2>퀄리스포츠 AS 현황 안내</h2>
            <form>
                <input type="text" id="name" name="name" placeholder="이름" required>
                <input type="text" id="contact" name="contact" placeholder="연락처" required>
                <input type="text" id="mileage" name="mileage" placeholder="주행거리" required>
                <input type="text" id="model" name="model" placeholder="모델" required>
                <!-- Address Section Toggle -->
                <input type="checkbox" id="addAddressCheckbox">
                <label for="addAddressCheckbox">주소입력</label>
                <div id="addressFields" style="display: none;">
                <input type="text" id="street" name="street"placeholder="주소" required>
                    
                <label for="longContent">Enter Long Content:</label>
                <textarea id="longContent" name="longContent" rows="4" cols="50"></textarea>
                
                <!-- Submit Button -->
                <input type="submit" value="Submit">                                    
                
            </form>
            
        </div>

        
    </table>    
    
    <span>
        <input type="text" id="name2" name="name2" placeholder="이름2" required>

    </span>

        <!-- <a href="/html/list.html">test list</a>
         다른 페이지 링크 걸기
        <a href="/html/list2.html">test2 list</a> -->
              
        <div id="content"></div>
        <script src="js/lib/jquery-3.2.1.min.js"></script>
        <script src="js/lib/handlebars.min.js"></script>
        <script src="js/lib/bootstrap.min.js"></script>
        <script id="entry-template" type="text/x-handlebars-template">
            <div class="mt-5" style="font-size: 9px; margin: 50px;">
                
                <div class="table-responsive">
                    <table class="table table-striped table-bordered table-hover">
                        <thead>
                        <tr>
                            <th>번호</th>
                            <th>예약, 반송, 문의</th>
                            <th>담당</th>
                            <th>물품명</th>
                            <th>결제방식</th>
                            <th>결제금액</th>
                            <th>확인된<br>구입일자</th>
                            <th>고장시 고객 주장(택배)<br>고장시 업체 주장(전화, 택배)</th>
                            <th>고장내용<br>선발송 사유</th>
                            <th>작업 히스토리<br>(수리자 이름등록)</th>
                            <th>유상처리 목록</th>
                            <th>비고(부품증가분)</th>
                            <th>result</th>
                        </tr>
                        </thead>
                        <tbody>
                        {{#each data}}
                        <tr>
                            <th scope="row">{{id}}</th>
                            <th>{{status}}</th>
                            <th>{{manager}}</th>
                            <th>{{item_name}}</th>
                            <th>{{payment_method}}</th>
                            <th>{{payment_amount}}</th>
                            <th>{{purchase_date}}</th>
                            <th>{{memo}}</th>
                            <th>{{fault_detail}}</th>
                            <th>{{history}}</th>
                            <th>{{payment_list}}</th>
                            <th>{{remark}}</th>
                            <th>{{result}}</th>
                        </tr>
                        {{/each}}
                        </tbody>
                    </table>
                </div>
            </div>
        </script>
        <script>
            let selectedButtonNumber = '';
            let selectedButtonColor = '';

            function selectButton(buttonNumber, buttonElement, idx) {
                // 모든 버튼의 선택 클래스 제거
                const buttons = document.querySelectorAll('.vertical-buttons button');
                buttons.forEach((button, i) => button.classList.remove('selected'+i));
                
                // 선택된 버튼에 선택 클래스 추가
                buttonElement.classList.add('selected' +idx);
                selectedButtonNumber = buttonNumber;
                selectedButtonColor = window.getComputedStyle(buttonElement).backgroundColor;
            }

            function addContent() {
                if (selectedButtonNumber === '') {
                    alert('먼저 번호 버튼을 선택하세요.');
                    return;
                }

                const inputField = document.getElementById('inputField');
                const content = inputField.value;
                const displayArea = document.getElementById('displayArea');
                const newContent = document.createElement('div');
                const newContent1 = document.createElement('span');
                const newContent2 = document.createElement('span');
                const newContent3 = document.createElement('span');

                newContent1.textContent = `${selectedButtonNumber}:`
                newContent2.textContent = `${content}`;
                newContent3.textContent = getCurrentDateTime();
                
                newContent1.style.color = selectedButtonColor; // 텍스트 색상 변경
                newContent2.style.color = '#000'; // 텍스트 색상 변경
                
                newContent.appendChild(newContent3);
                newContent.appendChild(newContent1);
                newContent.appendChild(newContent2);
                displayArea.appendChild(newContent);

                inputField.value = ''; // 입력 필드 초기화
                selectedButtonNumber = ''; // 선택된 버튼 번호 초기화

                // 모든 버튼의 선택 클래스 제거
                const buttons = document.querySelectorAll('.vertical-buttons button');
                buttons.forEach((button, i) => button.classList.remove('selected'+i));
            }

            function handleKeyPress(event) {
                if (event.key === 'Enter') {
                    addContent();
                }
            }

            function getCurrentDateTime() {
            const now = new Date();
            const date = now.toLocaleDateString('ko-KR');
            const time = now.toLocaleTimeString('ko-KR');
            return `${date} ${time}`;
            }
           

            function showSubmitMessage() {
                var result = confirm("제출되었습니다. 다시 검색하시겠습니까?");
                if (result) {
                // Yes 클릭 시 동작
                // 창을 닫는다
                window.close();
                } else {
                // No 클릭 시 동작
                // 아무 동작 없음
                }
            }

            const addAddressCheckbox = document.getElementById('addAddressCheckbox');
            const addressFields = document.getElementById('addressFields');
        
            addAddressCheckbox.addEventListener('change', function() {
            if (this.checked) {
                addressFields.style.display = 'block';
            } else {
                addressFields.style.display = 'none';
            }
            });
            
            // Function to generate a random post number
            function generatePostNumber() {
                return Math.floor(Math.random() * 1000) + 1; // Adjust range as needed
            }

            function setLabelPosition(position) {
                document.getElementById('label-position').value = position;
            }
            
            $(document).ready(function() {
                // API 호출
                $.ajax({
                    url: 'localhost',
                    method: 'GET',
                    dataType: 'json',
                    success: function(response) {
                        // 템플릿 가져오기
                        var source = document.getElementById("entry-template").innerHTML;

                        // 템플릿 컴파일
                        var template = Handlebars.compile(source);

                        // 데이터를 템플릿에 바인딩
                        var html = template({data: response});

                        // 결과를 HTML에 삽입
                        document.getElementById("content").innerHTML = html;
                    },
                    error: function(error) {
                        console.error('Error fetching data', error);
                    }
                });
            });
            
        </script>
        <script src="js/handlebars.test.js"></script>
    </body>
</html>
